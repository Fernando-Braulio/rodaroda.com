var selected_word,correct_sound,applause_sound,fail_sound,wrong_sound,available_words=[],is_finished=!1;function showTheAnswer(){for(var e=0;e<selected_word.word.length;e++)$("#letter_"+e).text(selected_word.word[e].toUpperCase())}function vibrate(e){navigator.vibrate&&navigator.vibrate(30)}function getAllIndexes(e,t){for(var a=[],r=0;r<e.length;r++)e[r].toUpperCase()==t.toUpperCase()&&a.push(r);return a}function finished(e){e?($("#modal-congratulations").modal("show"),applause_sound.play()):($("#modal-fail").modal("show"),fail_sound.play()),showTheAnswer(),$("#risk-the-answer").attr("disabled","disabled"),$(".letters").attr("disabled","disabled"),is_finished=!0}function init(){$.getJSON(url,function(e){null==e.feed.entry?alert("Erro ao buscar as palavras"):($.each(e.feed.entry,function(e,t){available_words.push({hint:t.gsx$hint.$t,words:t.gsx$words.$t.split(",")})}),$("#loading").hide(),$("#content").removeClass("hide").hide().fadeIn(),nextWord())})}function getIntRandom(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function nextWord(){var e=getIntRandom(0,available_words.length-1),t=getIntRandom(0,available_words[e].words.length-1);selected_word={hint:available_words[e].hint,word:available_words[e].words[t],hits:[]},$("#risk-the-answer").removeAttr("disabled","disabled"),$(".letters").removeAttr("disabled"),$(".accepted-letter").html("&nbsp;"),$("#hint").val(selected_word.hint.toUpperCase()),is_finished=!1;for(var a=0;a<12;a++)$("#letter_"+a).show();for(a=selected_word.word.length;a<12;a++)$("#letter_"+a).hide()}is_correct=!1,url="https://raw.githubusercontent.com/Fernando-Braulio/rodaroda.com/master/database.json",words=[],$(function(){correct_sound=new Howl({urls:["mus/correct.mp3"]}),applause_sound=new Howl({urls:["mus/applause.mp3"]}),wrong_sound=new Howl({urls:["mus/wrong-2.mp3"]}),fail_sound=new Howl({urls:["mus/fail.mp3"]}),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,$.ajaxSetup({cache:!0}),$(".letters").click(function(){var e=$(this).text(),t=getAllIndexes(selected_word.word,e);if(0==t.length)vibrate(30),wrong_sound.play();else{correct_sound.play();for(var a=0;a<t.length;a++)$("#letter_"+t[a]).text(e),$("#letter_"+t[a]).fadeTo(100,.1).fadeTo(200,1)}var r=!0;for(a=0;a<selected_word.word.length;a++)selected_word.word[a].toUpperCase()!=$("#letter_"+a).text().toUpperCase()&&(r=!1);r&&finished(!0),$(this).attr("disabled","disabled")}),$("#form-risk-the-answer").submit(function(e){e.preventDefault()}),$("#modal-risk-the-answer").on("show.bs.modal",function(){$("#the-anwser").val("")}),$("#btn-risk-the-answer").click(function(){$("#the-anwser").val().toUpperCase()==selected_word.word.toUpperCase()?finished(!0):finished(!1),$("#modal-risk-the-answer").modal("toggle")}),$("#modal-congratulations").on("keypress",function(e){13==e.which&&$(this).modal("toggle")}),$("#modal-fail").on("keypress",function(e){13==e.which&&$(this).modal("toggle")}),$("#btn-next-word").click(function(){(is_finished||confirm("Deseja realmente ir para a prÃ³xima palavra?"))&&(vibrate(30),nextWord())}),init()});